<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset='utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1'>

  <title>Svelte app</title>
  
  <style>
    * {
      box-sizing: border-box;
    }
    html, body {
      margin: 0;
      border: 0;
      padding: 0;
      width: 100%;
      height: 100%;
    }
  </style>
  <link rel="stylesheet" href="/pages/bundle.css" />
  <link rel="modulepreload" href="/pages/Home.js">
</head>

<body>
  <script>
    let injectStyleSheet = (href) => {
      let link = document.createElement("link");
      link.rel = "stylesheet";
      link.href = href;
      document.head.appendChild(link);
    };

    let renderWithFile = async (src, props) => {
      injectStyleSheet(src.match(/^([^.]+)\.js$/)[1] + ".css");
      return import(
        src
      ).then(module => {
        new module.default({
          target: document.body,
          props
        })
      });
    }

    let match = "";
    if(location.pathname.match(/\/shop\/\d+($|\?)/)){
      match = "/shop";
    } else if(location.pathname.match(/\/appointment/)){
      match = "/appointment";
    }

    switch(match || location.pathname){
    case "/appointment":
      renderWithFile("/pages/Appointment.js");
      break;
    case "/404":
      renderWithFile("/pages/404.js");
      break;
    case "/login":
      renderWithFile("/pages/Login.js");
      break;
    case "/register":
      renderWithFile("/pages/Register.js");
      break;
    case "/profile":
      // renderWithFile("/pages/Profile.js");
    case "/shop":
      renderWithFile("/pages/Shop.js", {
        id: (function(){
            let matchResult = location.href.match(/\/shop\/(\d+)(\?|$)/);
            if(matchResult){
              return parseInt(matchResult[1]) || "";
            } else{

            }
          })()
      });
      break;
    default:
    case "/home":
      renderWithFile("/pages/Home.js");
      break;
    }
  </script>
</body>
</html>
